{"version":3,"sources":["util/fn.js"],"names":["throttle","func","wait","options","timeout","context","args","result","previous","later","leading","Date","getTime","apply","throttled","now","remaining","argus","clearTimeout","trailing","setTimeout","cancel"],"mappings":";;;;;;;;;;;;;;;;YAQgBA,Q,GAAAA,Q;AARhB;;;;;;;AAQO,aAASA,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8BC,OAA9B,EAAuC;;AAE1C,YAAIC,gBAAJ;AACA,YAAIC,gBAAJ;AACA,YAAIC,aAAJ;AACA,YAAIC,eAAJ;AACA,YAAIC,WAAW,CAAf;;AAEA,YAAI,CAACL,OAAL,EAAc;AACVA,sBAAU,EAAV;AACH;;AAED,YAAMM,QAAQ,SAARA,KAAQ,GAAY;;AAEtBD,uBAAWL,QAAQO,OAAR,KAAoB,KAApB,GAA4B,CAA5B,GAAgC,IAAIC,IAAJ,GAAWC,OAAX,EAA3C;AACAR,sBAAU,IAAV;AACAG,qBAASN,KAAKY,KAAL,CAAWR,OAAX,EAAoBC,IAApB,CAAT;;AAEA,gBAAI,CAACF,OAAL,EAAc;AACVC,0BAAUC,OAAO,IAAjB;AACH;AAEJ,SAVD;;AAYA,YAAMQ,YAAY,SAAZA,SAAY,GAAoB;;AAElC,gBAAMC,MAAM,IAAIJ,IAAJ,EAAZ;;AAEA,gBAAI,CAACH,QAAD,IAAaL,QAAQO,OAAR,KAAoB,KAArC,EAA4C;AACxCF,2BAAWO,GAAX;AACH;;AAED,gBAAMC,YAAYd,QAAQa,MAAMP,QAAd,CAAlB;;AAEAH,sBAAU,IAAV;;AAVkC,8CAAPY,KAAO;AAAPA,qBAAO;AAAA;;AAWlCX,mBAAOW,KAAP;;AAEA,gBAAID,aAAa,CAAb,IAAkBA,YAAYd,IAAlC,EAAwC;AACpC,oBAAIE,OAAJ,EAAa;AACTc,iCAAad,OAAb;AACAA,8BAAU,IAAV;AACH;AACDI,2BAAWO,GAAX;AACAR,yBAASN,KAAKY,KAAL,CAAWR,OAAX,EAAoBC,IAApB,CAAT;AACA,oBAAI,CAACF,OAAL,EAAc;AACVC,8BAAUC,OAAO,IAAjB;AACH;AACJ,aAVD,MAWK,IAAI,CAACF,OAAD,IAAYD,QAAQgB,QAAR,KAAqB,KAArC,EAA4C;AAC7Cf,0BAAUgB,WAAWX,KAAX,EAAkBO,SAAlB,CAAV;AACH;;AAED,mBAAOT,MAAP;AACH,SA7BD;;AA+BAO,kBAAUO,MAAV,GAAmB,YAAY;AAC3BH,yBAAad,OAAb;AACAI,uBAAW,CAAX;AACAJ,sBAAUC,UAAUC,OAAO,IAA3B;AACH,SAJD;;AAMA,eAAOQ,SAAP;AAEH","file":"fn.js","sourcesContent":["/**\n* Copyright 2016 Baidu Inc. All rights reserved.\n*\n* @file function 相关的小工具\n* @author leon <ludafa@outlook.com>\n*/\n\n\nexport function throttle(func, wait, options) {\n\n    let timeout;\n    let context;\n    let args;\n    let result;\n    let previous = 0;\n\n    if (!options) {\n        options = {};\n    }\n\n    const later = function () {\n\n        previous = options.leading === false ? 0 : new Date().getTime();\n        timeout = null;\n        result = func.apply(context, args);\n\n        if (!timeout) {\n            context = args = null;\n        }\n\n    };\n\n    const throttled = function (...argus) {\n\n        const now = new Date();\n\n        if (!previous && options.leading === false) {\n            previous = now;\n        }\n\n        const remaining = wait - (now - previous);\n\n        context = this;\n        args = argus;\n\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) {\n                context = args = null;\n            }\n        }\n        else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n\n        return result;\n    };\n\n    throttled.cancel = function () {\n        clearTimeout(timeout);\n        previous = 0;\n        timeout = context = args = null;\n    };\n\n    return throttled;\n\n}\n"]}